# Kubernetes

![image-20200812223839369](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812223839369.png)

![image-20200812223854386](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812223854386.png)

![image-20200812223943641](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812223943641.png)

![image-20200812224058869](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812224058869.png)

![image-20200812224141248](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812224141248.png)

![image-20200812224213957](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812224213957.png)

![image-20200812224248499](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812224248499.png)

![image-20200812224304819](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812224304819.png)

![image-20200812224732593](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812224732593.png)

![image-20200812224910778](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812224910778.png)

![image-20200812224945133](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812224945133.png)

![image-20200812225122793](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812225122793.png)

![image-20200812225254134](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812225254134.png)

![image-20200812225333405](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812225333405.png)

![image-20200812225421569](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812225421569.png)

![image-20200812225626611](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812225626611.png)

![image-20200812225733692](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812225733692.png)

![image-20200812225808506](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812225808506.png)

![image-20200812225900982](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812225900982.png)

![image-20200812230010051](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812230010051.png)

![image-20200812230506340](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812230506340.png)

![image-20200812230529366](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812230529366.png)

![image-20200812230603667](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812230603667.png)

![image-20200812230617956](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812230617956.png)

![image-20200812230638264](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812230638264.png)

![image-20200812231025607](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812231025607.png)

![image-20200812232305377](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812232305377.png)

![image-20200812232425810](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812232425810.png)

修改之后要重启

![image-20200812232702412](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812232702412.png)

![image-20200812232711087](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812232711087.png)

![image-20200812233102430](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200812233102430.png)

![image-20200814220946680](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814220946680.png)

![image-20200814220956535](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814220956535.png)

![image-20200814222926100](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814222926100.png)

![image-20200814223719060](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814223719060.png)

![image-20200814224131335](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814224131335.png)

![image-20200814224143290](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814224143290.png)

![image-20200814224600268](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814224600268.png)

![image-20200814224612348](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814224612348.png)

![image-20200814224917696](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814224917696.png)

![image-20200814225405844](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814225405844.png)

设置阿里云源之后执行如下命令查看最新版本

```
yum list | grep kubeadm
```

![image-20200814225532260](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814225532260.png)

![image-20200814225411928](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814225411928.png)

```
yum -y install kubeadm kubelet kubectl
```

![image-20200814225728119](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814225728119.png)

![image-20200814225737406](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814225737406.png)

![image-20200814230101049](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814230101049.png)

![image-20200814230139226](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814230139226.png)

![image-20200814230147527](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814230147527.png)

![image-20200814230342826](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814230342826.png)

![image-20200814230353072](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814230353072.png)

![image-20200814230836365](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814230836365.png)

将镜像导入

```
docker load -i 文件名
```

![image-20200814233554691](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814233554691.png)

```shell
kubeadm init --kubernetes-version=v1.16.0 --pod-network-cidr=172.16.0.0/16 --apiserver-advertise-address=192.168.197.100
```

```shell
[init] Using Kubernetes version: v1.16.0
[preflight] Running pre-flight checks
	[WARNING SystemVerification]: this Docker version is not on the list of validated versions: 19.03.12. Latest validated version: 18.09
[preflight] Pulling images required for setting up a Kubernetes cluster
[preflight] This might take a minute or two, depending on the speed of your internet connection
[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'
[kubelet-start] Writing kubelet environment file with flags to file "/var/lib/kubelet/kubeadm-flags.env"
[kubelet-start] Writing kubelet configuration to file "/var/lib/kubelet/config.yaml"
[kubelet-start] Activating the kubelet service
[certs] Using certificateDir folder "/etc/kubernetes/pki"
[certs] Generating "ca" certificate and key
[certs] Generating "apiserver" certificate and key
[certs] apiserver serving cert is signed for DNS names [cnode-1 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.197.100]
[certs] Generating "apiserver-kubelet-client" certificate and key
[certs] Generating "front-proxy-ca" certificate and key
[certs] Generating "front-proxy-client" certificate and key
[certs] Generating "etcd/ca" certificate and key
[certs] Generating "etcd/server" certificate and key
[certs] etcd/server serving cert is signed for DNS names [cnode-1 localhost] and IPs [192.168.197.100 127.0.0.1 ::1]
[certs] Generating "etcd/peer" certificate and key
[certs] etcd/peer serving cert is signed for DNS names [cnode-1 localhost] and IPs [192.168.197.100 127.0.0.1 ::1]
[certs] Generating "etcd/healthcheck-client" certificate and key
[certs] Generating "apiserver-etcd-client" certificate and key
[certs] Generating "sa" key and public key
[kubeconfig] Using kubeconfig folder "/etc/kubernetes"
[kubeconfig] Writing "admin.conf" kubeconfig file
[kubeconfig] Writing "kubelet.conf" kubeconfig file
[kubeconfig] Writing "controller-manager.conf" kubeconfig file
[kubeconfig] Writing "scheduler.conf" kubeconfig file
[control-plane] Using manifest folder "/etc/kubernetes/manifests"
[control-plane] Creating static Pod manifest for "kube-apiserver"
[control-plane] Creating static Pod manifest for "kube-controller-manager"
[control-plane] Creating static Pod manifest for "kube-scheduler"
[etcd] Creating static Pod manifest for local etcd in "/etc/kubernetes/manifests"
[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory "/etc/kubernetes/manifests". This can take up to 4m0s
[apiclient] All control plane components are healthy after 32.501828 seconds
[upload-config] Storing the configuration used in ConfigMap "kubeadm-config" in the "kube-system" Namespace
[kubelet] Creating a ConfigMap "kubelet-config-1.16" in namespace kube-system with the configuration for the kubelets in the cluster
[upload-certs] Skipping phase. Please see --upload-certs
[mark-control-plane] Marking the node cnode-1 as control-plane by adding the label "node-role.kubernetes.io/master=''"
[mark-control-plane] Marking the node cnode-1 as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]
[bootstrap-token] Using token: cmx34b.juizw6tp9ptlgg9i
[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstrap-token] Creating the "cluster-info" ConfigMap in the "kube-public" namespace
[addons] Applied essential addon: CoreDNS
[addons] Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a pod network to the cluster.
Run "kubectl apply -f [podnetwork].yaml" with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join 192.168.197.100:6443 --token cmx34b.juizw6tp9ptlgg9i \
    --discovery-token-ca-cert-hash sha256:77661093886eb76ffa7595e200a4ce2a5b20f02c164f4946956dff16d941a1e7
```

![image-20200814234319811](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814234319811.png)



![image-20200815125221969](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815125221969.png)

![image-20200814234744431](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814234744431.png)

![image-20200814234519486](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814234519486.png)

![image-20200814234923202](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814234923202.png)

![image-20200814235119869](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200814235119869.png)

![image-20200815162432747](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815162432747.png)

![image-20200815162515591](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815162515591.png)

![image-20200815162523644](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815162523644.png)

![image-20200815162816658](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815162816658.png)

![image-20200815163243301](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815163243301.png)

![image-20200815163652046](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815163652046.png)

![image-20200815164057080](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164057080.png)

![image-20200815164110261](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164110261.png)

![image-20200815164253900](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164253900.png)

![image-20200815164455002](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164455002.png)

![image-20200815164543850](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164543850.png)

![image-20200815164628730](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164628730.png)

![image-20200815164645565](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164645565.png)
![image-20200815164717030](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164717030.png)

![image-20200815164753654](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164753654.png)

![image-20200815164916584](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164916584.png)

![image-20200815164938312](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815164938312.png)

![image-20200815165027639](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165027639.png)

![image-20200815165139476](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165139476.png)

![image-20200815165242590](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165242590.png)

![image-20200815165307913](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165307913.png)![image-20200815165320570](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165320570.png)

![image-20200815165334886](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165334886.png)

![image-20200815165345127](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165345127.png)

![image-20200815165402217](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165402217.png)

![image-20200815165446807](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165446807.png)

![image-20200815165613525](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165613525.png)



![image-20200815165724568](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165724568.png)

![image-20200815165911441](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815165911441.png)

![image-20200815170105413](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815170105413.png)

![image-20200815170221795](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815170221795.png)

![image-20200815170350078](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815170350078.png)

![image-20200815170459596](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815170459596.png)

![image-20200815170939987](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815170939987.png)

![image-20200815170956228](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815170956228.png)

![image-20200815171014065](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815171014065.png)

![image-20200815171118010](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815171118010.png)

![image-20200815171217226](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815171217226.png)

![image-20200815171243222](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815171243222.png)

![image-20200815171310486](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815171310486.png)

![image-20200815171527312](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815171527312.png)

![image-20200815171540540](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815171540540.png)

![image-20200815172521349](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815172521349.png)

![image-20200815175756541](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815175756541.png)

![image-20200815180413827](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815180413827.png)

![image-20200815180428164](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815180428164.png)

![image-20200815180438361](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815180438361.png)

![image-20200815180541398](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815180541398.png)

![image-20200815180632026](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815180632026.png)

![image-20200815180835607](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815180835607.png)

![image-20200815180900107](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815180900107.png)

![image-20200815181011778](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815181011778.png)

![image-20200815181111593](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815181111593.png)

![image-20200815182005696](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815182005696.png)

![image-20200815182029420](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815182029420.png)

![image-20200815182738223](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815182738223.png)

![image-20200815182903538](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815182903538.png)

![image-20200815183018668](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183018668.png)

![image-20200815183057362](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183057362.png)

![image-20200815183234366](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183234366.png)

![image-20200815183416267](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183416267.png)

![image-20200815183514487](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183514487.png)

![image-20200815183623769](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183623769.png)

![image-20200815183740498](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183740498.png)

![image-20200815183822954](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183822954.png)

![image-20200815183851010](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183851010.png)

![image-20200815183857288](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815183857288.png)

![image-20200815184025032](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184025032.png)

![image-20200815184128539](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184128539.png)

![image-20200815184147507](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184147507.png)

![image-20200815184223790](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184223790.png)

![image-20200815184248075](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184248075.png)

![image-20200815184305086](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184305086.png)

---：表示多个服务的 分割

![image-20200815184659458](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184659458.png)

![image-20200815184822827](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184822827.png)

![image-20200815184839179](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184839179.png)

![image-20200815184858062](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184858062.png)

<img src="C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815184945110.png" alt="image-20200815184945110" style="zoom:80%;" />

![image-20200815185120764](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815185120764.png)

![image-20200815185159354](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815185159354.png)

![image-20200815185208796](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815185208796.png)

![image-20200815185221076](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20200815185221076.png)











