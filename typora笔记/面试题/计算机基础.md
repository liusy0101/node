# 计算机基础

### 1、TCP如何实现可靠传输

- 应用数据被分割成TCP认为最适合发送的数据块
- 超时重传：当tcp发送一个段后，它启动了一个定时器，等待目的端确认收到这个报文段，如果不能及时收到一个确认，将重发这个报文段。
- TCP给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。
- 校验和：TCP将保持它首部和数据的校验和，这是一个端到端的校验和，目的是检测数据在传输过程中的任何变化，如果收到段的校验和有差错，TCP将丢弃这个报文段和不确认收到此报文段。
- TCP接收端会丢弃重复的数据。
- 流量控制：TCP链接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送段发送接收端缓冲区能接纳的数据，当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP使用的流量控制协议是可变大小的华东窗口协议。
- 拥塞控制：当网络拥塞时，减少数据的发送。

### 2、进程跟线程的联系和区分

- 区别与联系
  - 线程是CPU调度的基本单位，同一个进程中可以有多个线程，但至少有一个线程
  - 进程是操作系统分配资源的最小单位
- 一个进程中有哪些数据段
  - 代码段：保存代码
  - 静态数据段：静态数据
  - 未初始化数据段
  - 栈： 向下增长
  - 堆：向上增长
  - .rodata
- 进程中的不同线程间有哪些数据段是共享的
  - 除了栈之外均可共享

### 3、HTTPS密钥的交换过程

- 使用 **非对称加密** 处理用于加密数据的密钥
- 使用 **对称加密** 处理具体的数据

<img src="../typora-user-images/image-20230404091925444.png" alt="image-20230404091925444" style="zoom: 80%;" />

```
1.客户端获取公钥
	客户端发送请求，服务端返回公钥
	客户端用证书验证公钥，如果合法，继续下一步
2.客户端生成用于加密数据的密钥
	客户端生成随机密钥
	然后用服务器返回的公钥对这个密钥加密，得到加密后的密钥
3.服务端验证密钥
	客户端将加密后的密钥发给服务端
	服务端使用私钥解密得到密钥
4.使用密钥加密数据进行传输，使用密钥解密数据得到明文
	服务端使用获得的密钥加密数据，发送给客户端
	客户端使用密钥解密得到明文。
```

### 4、进程通信的几种方式

- 匿名管道( pipe )：管道是一种半双工的通信方式，数据只能单向流动，而且只能在具有亲缘关系的进程间使用。进程的亲缘关系通常是指父子进程关系。

  ```
  通过匿名管道实现进程间通信的步骤如下：
  父进程创建管道，得到两个⽂件描述符指向管道的两端
  父进程fork出子进程，⼦进程也有两个⽂件描述符指向同⼀管道。
  父进程关闭fd[0],子进程关闭fd[1]，即⽗进程关闭管道读端,⼦进程关闭管道写端（因为管道只支持单向通信）。⽗进程可以往管道⾥写,⼦进程可以从管道⾥读,管道是⽤环形队列实现的,数据从写端流⼊从读端流出,这样就实现了进程间通信。
  ```

- 高级管道(popen)：将另一个程序当做一个新的进程在当前程序进程中启动，则它算是当前程序的子进程，这种方式我们成为高级管道方式。

- 命名管道 (named pipe) ： 命名管道也是半双工的通信方式，但是它允许无亲缘关系进程间的通信。

- 消息队列( message queue ) ： 消息队列是由消息的链表，存放在内核中并由消息队列标识符标识。消息队列克服了信号传递信息少、管道只能承载无格式字节流以及缓冲区大小受限等缺点。

- 信号量( semophore ) ： 信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止某进程正在访问共享资源时，其他进程也访问该资源。因此，主要作为进程间以及同一进程内不同线程之间的同步手段。

- 信号 ( sinal ) ： 信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。

- 共享内存( shared memory ) ：共享内存就是映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问。共享内存是最快的 IPC 方式，它是针对其他进程间通信方式运行效率低而专门设计的。它往往与其他通信机制，如信号两，配合使用，来实现进程间的同步和通信。

- 套接字( socket ) ： 套接口也是一种进程间通信机制，与其他通信机制不同的是，它可用于不同机器间的进程通信。

### 5、TCP四次挥手为什么要有TIME_WAIT状态

![image-20230404094211104](../typora-user-images/image-20230404094211104.png)

- 保证TCP协议全双工连接能够可靠关闭，直接关闭的话，如果服务器没有收到ACK，会重复发FIN
- 保证这次连接的重复数据从网络中消失，如果上次的socket和这次的socket处理的程序一样，就会导致这次连接把上次的数据加进来了。

### 6、TCP/IP拥塞控制的含义是什么，有什么拥塞控制的方法？

- 拥塞控制：防止过多的数据注入到网络中，这样可以使网络中的路由器或链路不致过载。
- 对比流量控制：拥塞控制是一个全局的过程，涉及到所有的主机、路由器、以及降低网络相关的所有因素。流量控制往往指点对点通信量的控制。是端对端的问题。
- 几种拥塞控制的方法：慢开始，拥塞避免，快重传，快恢复。
  - 慢开始：主机开发发送数据报时，如果立即将大量的数据注入到网络中，可能会出现网络的拥塞。
    - 慢启动算法就是在主机刚开始发送数据报的时候先探测一下网络的状况，如果网络状况良好，发送方每发送一次文段都能正确的接受确认报文段。那么就从小到大的增加拥塞窗口的大小，即增加发送窗口的大小。
  - 拥墨避免：是让ewnd煲惯的增加而公是加信的增长，每经历过一次住返时问就使ownd馆加1，而不是加倍，这样使cwnd缓慢的增长，比慢启动要慢的多。
  - 快重传：快重传算法要求首先接收方收到一个失序的报文段后立刻发出重复确认，而不要等待自己发送数据时才进行捎带确认。
  - 快恢复：当发送方连续接到三个确认时，就执行乘法减小算法，把慢开始门限减半，但是接下来井不执行慢开始算法。而是把cwndQ置为ssthresh的一半，然后执行拥塞避免算法，使拥塞窗口缦慢增大。

### 7、TCP的三次握手和四次挥手

引申问题：为什么不能两次握手，三次握手会出现什么问题。

### 8、TCP和UDP的对比

- TCP是面向连接且可靠的，UDP是面向非连接且非可靠
- TCP是面向字节流的，UDP是面向报文流
- TCP的传输效率低，UDP传输效率高
- TCP有流量控制，拥塞控制等，MUDP没有
- TCP适用于对可靠性要求比较高，但对效率要求低的场景，而UDP适用于对可靠性要求比较低，对效率要求比较高的场景
- TCP协议应用：HTTP/FTP/TELNET/SMTP UDP协议应用：DNS/SNMP

### 9、select、poll、epoll的区别

- IO多路复用都是一个进程可以监控多个文件描述符，一旦某个描述符就绪，能够通知程序进行相应的读写操
- select：调用过程a将fd_set从用户空间拷贝到内核空问 b：遍历fd_set 将就绪的fd拷贝到用户空间；缺点是aselect支持的fd数目是通过FD_SETSIZE指定，存在数目限制 b:select调用时需要在用户和内核空问进行fd_set的拷贝，开销比较大 c:select调用时需要在内核中遍历fd_ set,10效率低
- poll: select的增强版，用链表来实现fd_set,故没有fd数目的限制，但效率依1日不高
- epol：每次调用epoll_ct函数进行注册时候，会将fd_set拷贝到内核空间，避免每次调用时重复拷贝；无需遍历fd_set,epoll维护一个就绪列表，一旦某个fd就绪，就把fd插入到链表中，epoll wait只需遍历该链接即可;epoll没有fd数据限制，它所支持的fd上限是最大可以打开文件的数目
- epoll支持两种触发方式：水平触发(LT)和边缘触发 (ET),LT和ET最大的区别就是epollwait检测fd就绪后，应用程序可以不立即处理，下次调用epoll_wait会再次通知此事件；而ET则不支持，一旦通知之后就再通知。
  收起人

### 10、从输入URL到页面加载完成的过程

### 11、DSN解析的过程

### 12、用户态和内核态的区别

### 13、HashMap、HashTable的区别，ConcurrentHashMap的实现原理

### 14、进程调度策略

题目描述
-你知道哪些操作系统的进程调度策略？
-假设操作系统的进程优先级被分为0-9级，如果需要基于这些优先级实现一个0(1)的调度器，你会怎么做？工作流程是怎么样的？
一完全公平调度器 (CFS） 最核心的数据结构是什么？为什么采用这种数据结构？
答案
一些调度算法：
1. FCFS：先来先服务
2. 最短作业优先：每次选择所需处理时间最短的进程运行
3. 最短剩余时间优先：总是选择预期剩余时间最短的进程
4. 高回复率优先/最高响应比优先：根据等待时间W和需要服务的时间S计算响应比R=(w+S)/s，优先服务响应比高的
5. 轮转调度(roundrobin）：每个进程分配一个时间片，时间片用完还未结束则挂起
6. 优先级调度：每个进程分配一个优先级，优先服务高优先级的进程
  实现一个O(1)的调度器，清晰合理即可，参考：基于10个等级，使用两组各10个链表维护，每次从一组选优先级大的轮转执行，并放入另一组，一轮结束后交换两组链表
  CFS调度器：内部使用红黑树维护进程，优点：自平衡、高效、公平性好

### 15、进程间通信-共享内存

### 16、http和tcp keep-alive的机制

### 17、操作系统内存管理中，什么是段页式管理？在段页式分配中，cpu每次从内存中取一次数据需要访问多少次

- 段页式存储管理：在段页式存储中，每个分段又被分成若千个固定大小的页。段页式存储组织是分段式和分页式结合的存储组织方法，这样可充分利用分段管理和分页管理的优点。
- 1.用分段方法来分配和管理虛拟存储器。程序的地址空间按逻辑单位分成基本独立的段，而每一段有自己的段名，再把每段分成固定大小的若干页。
- 用分页方法来分配和管理实存。即把整个主存分成与上述页大小相等的存储块，可装入作业的任何一页。程序对内存的调入或调出是按页进行的。但它叉可按段实现共享和保护。
- 逻辑地址结构。一个逻辑地址用三个参数表示：段号S；页号P；页内地址d。
- 段表、页表、段表地址寄存器。为了进行地址转换，系统为每个作业建立一个段表，并且要为该作业段表中的每一个段建立一个页表。系统中有一个段表地址寄存器来指出作业的段表起始地址和段表长
  度。
- 
- -取一次数据需要访问3次内存
  - 在段页式存储管理方式中，取一次数据：首先要从内存中查找段表；再查找该段对应的页表；最后通过得到的物理地址访问内存获得数据。

### 18、同步IO和异步IO的区别

### 19、操作系统-页面置换算法LRU、FIFO

### 20、操作系统-作业调度

题目描述
＃1.先来先服务（FCFS） 有什么缺陷？
2.如何改进？改进算法有什么缺陷或者实现难点，
3.短作业优先如何预测作业时间？
答案
1.阻塞
2.

-短作业优先 （SJF)一必须知道作业时间、长作业饥饿、重要作业无法优先处理
-轮转时间片(RR)一时间片长度选择、平均等待时间长、上下文切换资源消耗多
-多级反馈队列(MLFQ)一关于每级队列的实现有多种说法（缺陷未知）
3.

-按無代码量预测
-根据代码中的操作类型预测（系统进程VS用户进程、根据1日操作预测）
--动态预测：实时更新作业时间的均值作为预测值
-指数平均、王滑因子等相比均值更加高级的数学方法